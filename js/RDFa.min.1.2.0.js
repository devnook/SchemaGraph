/*
 green-turtle version 1.2.0 Copyright (c) 2011-2013, R. Alexander Milowski <alex@milowski.com> All rights reserved. */
if("undefined"==typeof GreenTurtle)var GreenTurtle=function(){function r(){}function j(a){this.target=a?a:{graph:{subjects:{},prefixes:{},terms:{}}};this.theOne="_:"+(new Date).getTime();this.vocabulary=this.language=null;this.blankCounter=0;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.inXHTMLMode=!1;this.absURIRE=/[\w\_\-]+:\S+/;this.finishedHandlers=[];this.init()}function M(){var a=this;this.curieParser={trim:function(a){return a.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")},parse:function(b,c){b=this.trim(b);"["==b.charAt(0)&&"]"==b.charAt(b.length-1)&&(b=b.substring(1,b.length-1));var e=b.indexOf(":");if(0<=e){var f=b.substring(0,e);if(""==f)return(f=a.prefixes[""])?f+b.substring(e+1):null;if("_"==f)return"_:"+b.substring(e+1);if(p.NCNAME.test(f)&&(f=a.prefixes[f]))return f+b.substring(e+1)}return c?a.baseURI.resolve(b):b}};this.base=null;this.toString=function(a){var c=a&&a.shorten?{graph:this,shorten:!0,prefixesUsed:{}}:null;s="";for(var e in this.subjects)s+=
this.subjects[e].toString(c),s+="\n";a=a&&a.baseURI?"@base <"+baseURI+"> .\n":"";if(c&&c.shorten)for(var f in c.prefixesUsed)a+="@prefix "+f+" <"+this.prefixes[f]+"> .\n";return 0==a.length?s:a+"\n"+s};this.clear=function(){this.subjects={};this.prefixes={};this.terms={}};this.clear();Object.defineProperty(this,"tripleCount",{enumerable:!0,configurable:!1,get:function(){var a=0,c;for(c in this.subjects){var e=this.subjects[c],f;for(f in e.predicates)a+=e.predicates[f].objects.length}return a}})}function E(a,
b){this.graph=a;this.id=this.subject=b;this.predicates={};this.origins=[];this.types=[]}function z(a){this.predicate=this.id=a;this.objects=[]}function x(a){j.call(this,a)}function P(a){this.query=function(b,c){if(!b)return a.getProjections(c);var e=[],f;for(f in a._data_.graph.subjects){var i=a._data_.graph.subjects[f],k;for(k in b){var h=a._data_.graph.curieParser.parse(k,!0),h=i.predicates[h];if(!h){i=null;break}for(var g=a._data_.graph.curieParser.parse(b[k],!1),d=null,j=0;!d&&j<h.objects.length;j++)h.objects[j].value==
g&&(d=h.objects[j]);if(!d){i=null;break}}i&&e.push(p.toProjection(a,i,c))}return e}}function H(a,b){this._data_={owner:a,subject:b,properties:{}}}function p(a){this._data_={graph:new M};this._data_.graph.baseURI=this.parseURI(a);this._data_.baseURI=this._data_.graph.baseURI;Object.defineProperty(this,"rdfa",{value:new P(this),writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"graph",{value:this._data_.graph,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,
"implementation",{value:GreenTurtle.implementation,writable:!1,configurable:!1,enumerable:!0})}function d(){this.reset();this.onError=function(a,b){console.log(a+": "+b)}}function l(){this.blankCounter=0;this.vocabularies=[{namespaceURI:"http://schema.org/",isMember:function(a){return 0==a.indexOf(this.namespaceURI)},getProperty:function(a){return this.namespaceURI+a}}]}function N(a){l.call(this);this.graph=a}var O={version:"1.2.0"};r.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/;r.prototype.parseURI=function(a){var b=
r.SCHEME.exec(a);if(!b)throw"Bad URI value, no scheme: "+a;a={spec:a};a.scheme=b[0].substring(0,b[0].length-1);a.schemeSpecificPart=a.spec.substring(b[0].length);"/"==a.schemeSpecificPart.charAt(0)&&"/"==a.schemeSpecificPart.charAt(1)?this.parseGeneric(a):a.isGeneric=!1;a.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(1<this.path.length&&"/."==this.path.substring(this.path.length-2))this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-
1,1);else{var a=this.path.charAt(this.path.length-1);"/"!=a&&(a="");for(var b=0;b<this.segments.length;b++)0<b&&".."==this.segments[b]&&(this.segments.splice(b-1,2),b-=2),"."==this.segments[b]&&(this.segments.splice(b,1),b--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+a}this.schemeSpecificPart="//"+this.authority+this.path;"undefined"!=typeof this.query&&(this.schemeSpecificPart+="?"+this.query);"undefined"!=typeof this.fragment&&(this.schemeSpecificPart+="#"+this.fragment);
this.spec=this.scheme+":"+this.schemeSpecificPart}};a.resolve=function(a){if(!a)return this.spec;if("#"==a.charAt(0)){var b=this.spec.lastIndexOf("#");return 0>b?this.spec+a:this.spec.substring(0,b)+a}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;a.indexOf(":");if("/"==a.charAt(0))return this.scheme+"://"+this.authority+a;if("."==a.charAt(0)&&"/"==a.charAt(1)){if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a.substring(2);
b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b)+a.substring(1)}if(r.SCHEME.test(a))return a;if("?"==a.charAt(0)||"/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a;b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b+1)+a};a.relativeTo=function(a){if(a.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!a.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+
a.spec;if(a.authority!=this.authority)return this.spec;for(var b=0;b<this.segments.length&&b<a.segments.length;b++)if(this.segments[b]!=a.segments[b]){for(var f="",i=b;i<a.segments.length;i++)f+="../";for(i=b;i<this.segments.length;i++)f+=this.segments[i],i+1<this.segments.length&&(f+="/");"/"==this.path.charAt(this.path.length-1)&&(f+="/");return f}if(this.segments.length==a.segments.length)return this.hash?this.hash:this.query?this.query:"";if(b<this.segments.length){f="";for(i=b;i<this.segments.length;i++)f+=
this.segments[i],i+1<this.segments.length&&(f+="/");"/"==this.path.charAt(this.path.length-1)&&(f+="/");return f}throw"Cannot calculate a relative URI for "+this.spec+" against "+a.spec;};return a};r.prototype.parseGeneric=function(a){if("/"!=a.schemeSpecificPart.charAt(0)||"/"!=a.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+a.spec;var b=a.schemeSpecificPart.substring(2),c=b.indexOf("/");a.authority=0>c?b:b.substring(0,c);a.path=0>c?"":b.substring(c);b=a.path.indexOf("#");
0<=b&&(a.fragment=a.path.substring(b+1),a.path=a.path.substring(0,b));b=a.path.indexOf("?");0<=b&&(a.query=a.path.substring(b+1),a.path=a.path.substring(0,b));if("/"==a.path||""==a.path)a.segments=[];else{a.segments=a.path.split(/\//);0<a.segments.length&&(""==a.segments[0]&&1<a.path.length&&"/"!=a.path.charAt(1))&&a.segments.shift();0<a.segments.length&&0<a.path.length&&"/"==a.path.charAt(a.path.length-1)&&""==a.segments[a.segments.length-1]&&1<a.path.length&&"/"!=a.path.charAt(a.path.length-2)&&
a.segments.pop();for(b=0;b<a.segments.length;b++)for(var c=a.segments[b].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/),e=0;e<c.length;e++)if(0<c[e].length)throw"Unecaped character "+c[e].charAt(0)+" ("+c[e].charCodeAt(0)+") in URI "+a.spec;}a.isGeneric=!0};j.prototype=new r;j.prototype.constructor=j;j.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};j.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";
j.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";j.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";j.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";j.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";j.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";j.nameStartChar=
"[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
j.NCNAME=RegExp("^"+j.nameStartChar+j.nameChar+"*$");j.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};j.prototype.tokenize=function(a){return j.trim(a).split(/\s+/)};j.prototype.parseSafeCURIEOrCURIEOrURI=function(a,b,c){a=j.trim(a);return"["==a.charAt(0)&&"]"==a.charAt(a.length-1)?(a=a.substring(1,a.length-1),a=a.trim(a),0==a.length?null:"_:"==a?this.theOne:this.parseCURIE(a,b,c)):this.parseCURIEOrURI(a,b,c)};j.prototype.parseCURIE=function(a,b){var c=a.indexOf(":");if(0<=c){var e=
a.substring(0,c);if(""==e)return(e=b[""])?e+a.substring(c+1):null;if("_"==e)return"_:"+a.substring(c+1);if(j.NCNAME.test(e)&&(e=b[e]))return e+a.substring(c+1)}return null};j.prototype.parseCURIEOrURI=function(a,b,c){return(b=this.parseCURIE(a,b,c))?b:this.resolveAndNormalize(c,a)};j.prototype.parsePredicate=function(a,b,c,e,f,i){return""==a?null:(a=this.parseTermOrCURIEOrAbsURI(a,b,i?null:c,e,f))&&0==a.indexOf("_:")?null:a};j.prototype.parseTermOrCURIEOrURI=function(a,b,c,e,f){a=j.trim(a);if((e=
this.parseCURIE(a,e,f))||(e=c[a]))return e;e=a.toLowerCase();return(e=c[e])?e:b&&!this.absURIRE.exec(a)?b+a:this.resolveAndNormalize(f,a)};j.prototype.parseTermOrCURIEOrAbsURI=function(a,b,c,e,f){a=j.trim(a);if(e=this.parseCURIE(a,e,f))return e;if(c){if(b&&!this.absURIRE.exec(a))return b+a;if(b=c[a])return b;b=a.toLowerCase();if(b=c[b])return b}return this.absURIRE.exec(a)?this.resolveAndNormalize(f,a):null};j.prototype.resolveAndNormalize=function(a,b){var c=a.resolve(b),c=this.parseURI(c);c.normalize();
return c.spec};j.prototype.parsePrefixMappings=function(a,b){for(var c=this.tokenize(a),e=null,f=0;f<c.length;f++)":"==c[f][c[f].length-1]?e=c[f].substring(0,c[f].length-1):e&&(b[e]=this.target.baseURI?this.target.baseURI.resolve(c[f]):c[f],e=null)};j.prototype.copyMappings=function(a){var b={},c;for(c in a)b[c]=a[c];return b};j.prototype.ancestorPath=function(a){for(var b="";a&&a.nodeType!=Node.DOCUMENT_NODE;)b="/"+a.localName+b,a=a.parentNode;return b};j.prototype.setContext=function(a){"html"==
a.localName&&"XHTML+RDFa 1.1"==a.getAttribute("version")?this.setXHTMLContext():"html"==a.localName||"http://www.w3.org/1999/xhtml"==a.namespaceURI?document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"==document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"==
document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()};j.prototype.setInitialContext=function(){this.vocabulary=null;this.target.graph.prefixes={};this.target.graph.terms={};this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.target.graph.prefixes[""]="http://www.w3.org/1999/xhtml/vocab#";this.target.graph.prefixes.grddl="http://www.w3.org/2003/g/data-view#";this.target.graph.prefixes.ma="http://www.w3.org/ns/ma-ont#";
this.target.graph.prefixes.owl="http://www.w3.org/2002/07/owl#";this.target.graph.prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#";this.target.graph.prefixes.rdfa="http://www.w3.org/ns/rdfa#";this.target.graph.prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#";this.target.graph.prefixes.rif="http://www.w3.org/2007/rif#";this.target.graph.prefixes.skos="http://www.w3.org/2004/02/skos/core#";this.target.graph.prefixes.skosxl="http://www.w3.org/2008/05/skos-xl#";this.target.graph.prefixes.wdr=
"http://www.w3.org/2007/05/powder#";this.target.graph.prefixes["void"]="http://rdfs.org/ns/void#";this.target.graph.prefixes.wdrs="http://www.w3.org/2007/05/powder-s#";this.target.graph.prefixes.xhv="http://www.w3.org/1999/xhtml/vocab#";this.target.graph.prefixes.xml="http://www.w3.org/XML/1998/namespace";this.target.graph.prefixes.xsd="http://www.w3.org/2001/XMLSchema#";this.target.graph.prefixes.sd="http://www.w3.org/ns/sparql-service-description#";this.target.graph.prefixes.org="http://www.w3.org/ns/org#";
this.target.graph.prefixes.gldp="http://www.w3.org/ns/people#";this.target.graph.prefixes.cnt="http://www.w3.org/2008/content#";this.target.graph.prefixes.dcat="http://www.w3.org/ns/dcat#";this.target.graph.prefixes.earl="http://www.w3.org/ns/earl#";this.target.graph.prefixes.ht="http://www.w3.org/2006/http#";this.target.graph.prefixes.ptr="http://www.w3.org/2009/pointers#";this.target.graph.prefixes.cc="http://creativecommons.org/ns#";this.target.graph.prefixes.ctag="http://commontag.org/ns#";this.target.graph.prefixes.dc=
"http://purl.org/dc/terms/";this.target.graph.prefixes.dcterms="http://purl.org/dc/terms/";this.target.graph.prefixes.foaf="http://xmlns.com/foaf/0.1/";this.target.graph.prefixes.gr="http://purl.org/goodrelations/v1#";this.target.graph.prefixes.ical="http://www.w3.org/2002/12/cal/icaltzd#";this.target.graph.prefixes.og="http://ogp.me/ns#";this.target.graph.prefixes.rev="http://purl.org/stuff/rev#";this.target.graph.prefixes.sioc="http://rdfs.org/sioc/ns#";this.target.graph.prefixes.v="http://rdf.data-vocabulary.org/#";
this.target.graph.prefixes.vcard="http://www.w3.org/2006/vcard/ns#";this.target.graph.prefixes.schema="http://schema.org/";this.target.graph.terms.describedby="http://www.w3.org/2007/05/powder-s#describedby";this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role"};j.prototype.setXMLContext=function(){this.setInitialContext();this.inHTMLMode=this.inXHTMLMode=!1};j.prototype.setHTMLContext=function(){this.setInitialContext();
this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.inXHTMLMode=!1;this.inHTMLMode=!0};j.prototype.setXHTMLContext=function(){this.setInitialContext();this.inXHTMLMode=!0;this.inHTMLMode=!1;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate";this.target.graph.terms.appendix=
"http://www.w3.org/1999/xhtml/vocab#appendix";this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark";this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite";this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter";this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents";this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright";this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first";
this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary";this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help";this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon";this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index";this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last";this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta";
this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next";this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev";this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous";this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section";this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet";this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection";this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start";
this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top";this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up";this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1";this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related";this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role";this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"};j.prototype.init=function(){};j.prototype.newSubjectOrigin=
function(){};j.prototype.addTriple=function(){};j.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,
type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];j.deriveDateTimeType=function(a){for(var b=0;b<
j.dateTimeTypes.length;b++){var c=j.dateTimeTypes[b].pattern.exec(a);if(c&&c[0].length==a.length)return j.dateTimeTypes[b].type}return null};j.prototype.process=function(a,b){a.nodeType==Node.DOCUMENT_NODE?(a=a.documentElement,this.setContext(a)):a.parentNode.nodeType==Node.DOCUMENT_NODE&&this.setContext(a);var c=[],e=function(a){var c=a.indexOf("#");0<=c&&(a=a.substring(0,c));b&&b.baseURIMap&&(a=b.baseURIMap(a));return a};for(c.push({current:a,context:this.push(null,e(a.baseURI))});0<c.length;){var f=
c.shift();if(f.parent){if(!(f.context.parent&&f.context.parent.listMapping==f.listMapping))for(var i in f.listMapping){var k=f.listMapping[i];if(0==k.length)this.addTriple(f.parent,f.subject,i,{type:j.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});else{for(var h=[],g=0;g<k.length;g++)h.push(this.newBlankNode());for(g=0;g<h.length;g++)this.addTriple(f.parent,h[g],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",k[g]),this.addTriple(f.parent,h[g],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
{type:j.objectURI,value:g+1<h.length?h[g+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(f.parent,f.subject,i,{type:j.objectURI,value:h[0]})}}}else{var h=f.current,f=f.context,d=!1,m=null,q=null,n=null,l=f.prefixes,k=!1,p=[],w=f.listMapping,x=f.parent?!1:!0,L=f.language,r=f.vocabulary,u=this.parseURI(e(h.baseURI));h.item=null;if(g=h.getAttributeNode("vocab"))g=j.trim(g.value),0<g.length?(r=g,this.addTriple(h,u.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:j.objectURI,
value:r})):r=this.vocabulary;for(g=0;g<h.attributes.length;g++){var y=h.attributes[g];if("x"==y.nodeName.charAt(0)&&0==y.nodeName.indexOf("xmlns:")){k||(l=this.copyMappings(l),k=!0);var A=y.nodeName.substring(6),y=j.trim(y.value);l[A]=this.target.baseURI?this.target.baseURI.resolve(y):y}}if(g=h.getAttributeNode("prefix"))k||(l=this.copyMappings(l),k=!0),this.parsePrefixMappings(g.value,l);k=null;for(g=0;!k&&g<this.langAttributes.length;g++)k=h.getAttributeNodeNS(this.langAttributes[g].namespaceURI,
this.langAttributes[g].localName);k&&(g=j.trim(k.value),L=0<g.length?g:null);var A=h.getAttributeNode("rel"),y=h.getAttributeNode("rev"),B=h.getAttributeNode("typeof"),z=h.getAttributeNode("property"),D=h.getAttributeNode("datatype"),E=this.inHTMLMode?h.getAttributeNode("datetime"):null,K=h.getAttributeNode("content"),C=h.getAttributeNode("about"),I=h.getAttributeNode("src"),G=h.getAttributeNode("resource"),J=h.getAttributeNode("href"),H=h.getAttributeNode("inlist"),t=[];if(A)for(var F=this.tokenize(A.value),
g=0;g<F.length;g++)(i=this.parsePredicate(F[g],r,f.terms,l,u,this.inHTMLMode&&null!=z))&&t.push(i);var v=[];if(y){F=this.tokenize(y.value);for(g=0;g<F.length;g++)(i=this.parsePredicate(F[g],r,f.terms,l,u,this.inHTMLMode&&null!=z))&&v.push(i)}if(this.inHTMLMode&&(null!=A||null!=y)&&null!=z)0==t.length&&(A=null),0==v.length&&(y=null);if(A||y){C&&(m=this.parseSafeCURIEOrCURIEOrURI(C.value,l,u));B&&(n=m);m||(h.parentNode.nodeType==Node.DOCUMENT_NODE?m=e(h.baseURI):f.parentObject&&(m=e(h.parentNode.baseURI)==
f.parentObject?e(h.baseURI):f.parentObject));G&&(q=this.parseSafeCURIEOrCURIEOrURI(G.value,l,u));if(!q)if(J)q=this.resolveAndNormalize(u,encodeURI(J.value));else if(I)q=this.resolveAndNormalize(u,encodeURI(I.value));else if(B&&!C&&(!this.inXHTMLMode||!("head"==h.localName||"body"==h.localName)))q=this.newBlankNode();B&&!C&&this.inXHTMLMode&&("head"==h.localName||"body"==h.localName)?n=m:B&&!C&&(n=q)}else if(z&&!K&&!D){if(C&&(m=this.parseSafeCURIEOrCURIEOrURI(C.value,l,u),B&&(n=m)),!m&&h.parentNode.nodeType==
Node.DOCUMENT_NODE?(m=e(h.baseURI),B&&(n=m)):!m&&f.parentObject&&(m=e(h.parentNode.baseURI)==f.parentObject?e(h.baseURI):f.parentObject),B&&!n){G&&(n=this.parseSafeCURIEOrCURIEOrURI(G.value,l,u));!n&&J&&(n=this.resolveAndNormalize(u,encodeURI(J.value)));!n&&I&&(n=this.resolveAndNormalize(u,encodeURI(I.value)));if(!n&&(this.inXHTMLMode||this.inHTMLMode)&&("head"==h.localName||"body"==h.localName))n=m;n||(n=this.newBlankNode());q=n}}else C&&(m=this.parseSafeCURIEOrCURIEOrURI(C.value,l,u)),!m&&G&&(m=
this.parseSafeCURIEOrCURIEOrURI(G.value,l,u)),!m&&J&&(m=this.resolveAndNormalize(u,encodeURI(J.value))),!m&&I&&(m=this.resolveAndNormalize(u,encodeURI(I.value))),m||(h.parentNode.nodeType==Node.DOCUMENT_NODE?m=e(h.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&("head"==h.localName||"body"==h.localName)?m=e(h.parentNode.baseURI)==f.parentObject?e(h.baseURI):f.parentObject:B?m=this.newBlankNode():f.parentObject&&(m=e(h.parentNode.baseURI)==f.parentObject?e(h.baseURI):f.parentObject,z||(d=!0))),B&&(n=
m);if(m&&(C||G||n))g=m,B&&(!C&&!G&&q)&&(g=q),this.newSubjectOrigin(h,g);if(n){F=this.tokenize(B.value);for(g=0;g<F.length;g++)(k=this.parseTermOrCURIEOrAbsURI(F[g],r,f.terms,l,u))&&this.addTriple(h,n,j.typeURI,{type:j.objectURI,value:k})}m&&m!=f.parentObject&&(w={},x=!0);if(q){if(A&&H)for(g=0;g<t.length;g++)k=w[t[g]],k||(k=[],w[t[g]]=k),k.push({type:j.objectURI,value:q});else if(A)for(g=0;g<t.length;g++)this.addTriple(h,m,t[g],{type:j.objectURI,value:q});if(y)for(g=0;g<v.length;g++)this.addTriple(h,
q,v[g],{type:j.objectURI,value:m})}else{if(m&&!q&&(A||y))q=this.newBlankNode();if(A&&H)for(g=0;g<t.length;g++)k=w[t[g]],k||(k=[],w[i]=k),p.push({predicate:t[g],list:k});else if(A)for(g=0;g<t.length;g++)p.push({predicate:t[g],forward:!0});if(y)for(g=0;g<v.length;g++)p.push({predicate:v[g],forward:!1})}if(z){v=t=null;D?(t=""==D.value?j.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(D.value,r,f.terms,l,u),v=E&&!K?E.value:t==j.XMLLiteralURI||t==j.HTMLLiteralURI?null:K?K.value:h.textContent):K?(t=j.PlainLiteralURI,
v=K.value):E?(v=E.value,t=j.deriveDateTimeType(v),t||(t=j.PlainLiteralURI)):!A&&!y&&(G&&(v=this.parseSafeCURIEOrCURIEOrURI(G.value,l,u)),!v&&J?v=this.resolveAndNormalize(u,encodeURI(J.value)):!v&&I&&(v=this.resolveAndNormalize(u,encodeURI(I.value))),v&&(t=j.objectURI));t||(B&&!C?(t=j.objectURI,v=n):(v=h.textContent,this.inHTMLMode&&"time"==h.localName&&(t=j.deriveDateTimeType(v)),t||(t=j.PlainLiteralURI)));F=this.tokenize(z.value);for(g=0;g<F.length;g++)if(i=this.parsePredicate(F[g],r,f.terms,l,u))H?
(k=w[i],k||(k=[],w[i]=k),k.push(t==j.XMLLiteralURI||t==j.HTMLLiteralURI?{type:t,value:h.childNodes}:{type:t?t:j.PlainLiteralURI,value:v,language:L})):t==j.XMLLiteralURI||t==j.HTMLLiteralURI?this.addTriple(h,m,i,{type:t,value:h.childNodes}):this.addTriple(h,m,i,{type:t?t:j.PlainLiteralURI,value:v,language:L})}if(m&&!d)for(g=0;g<f.incomplete.length;g++)f.incomplete[g].list?f.incomplete[g].list.push({type:j.objectURI,value:m}):f.incomplete[g].forward?this.addTriple(h,f.subject,f.incomplete[g].predicate,
{type:j.objectURI,value:m}):this.addTriple(h,m,f.incomplete[g].predicate,{type:j.objectURI,value:f.subject});n=null;u=m;d?(n=this.push(f,f.subject),n.parentObject=e(h.parentNode.baseURI)==f.parentObject?e(h.baseURI):f.parentObject,n.incomplete=f.incomplete,n.language=L,n.prefixes=l):(n=this.push(f,m),n.parentObject=q?q:m?m:f.subject,n.prefixes=l,n.incomplete=p,q&&(u=q,w={},x=!0),n.listMapping=w,n.language=L);n.vocabulary=r;x&&c.unshift({parent:h,context:f,subject:u,listMapping:w});for(h=h.lastChild;h;h=
h.previousSibling)h.nodeType==Node.ELEMENT_NODE&&c.unshift({current:h,context:n})}}this.inHTMLMode&&this.copyProperties();for(g=0;g<this.finishedHandlers.length;g++)this.finishedHandlers[g](a)};j.prototype.copyProperties=function(){};j.prototype.push=function(a,b){return{parent:a,subject:b?b:a?a.subject:null,parentObject:null,incomplete:[],listMapping:a?a.listMapping:{},language:a?a.language:this.language,prefixes:a?a.prefixes:this.target.graph.prefixes,terms:a?a.terms:this.target.graph.terms,vocabulary:a?
a.vocabulary:this.vocabulary}};M.prototype.expand=function(a){return this.curieParser.parse(a,!0)};M.prototype.shorten=function(a,b){for(prefix in this.prefixes){var c=this.prefixes[prefix];if(0==a.indexOf(c))return b&&(b[prefix]=c),prefix+":"+a.substring(c.length)}return null};E.prototype.toString=function(a){var b=null;"_:"==this.subject.substring(0,2)?b=this.subject:a&&a.shorten?(b=this.graph.shorten(this.subject,a.prefixesUsed))||(b="<"+this.subject+">"):b="<"+this.subject+">";var c=!0,e;for(e in this.predicates)c?
c=!1:b+=";\n",b+=" "+this.predicates[e].toString(a);return b+" ."};E.prototype.toObject=function(){var a={subject:this.subject,predicates:{}},b;for(b in this.predicates){var c=this.predicates[b],e={predicate:b,objects:[]};a.predicates[b]=e;for(var f=0;f<c.objects.length;f++){var i=c.objects[f];if(i.type==j.XMLLiteralURI){for(var d=new XMLSerializer,h="",g=0;g<i.value.length;g++)i.value[g].nodeType==Node.ELEMENT_NODE?h+=d.serializeToString(i.value[g]):i.value[g].nodeType==Node.TEXT_NODE&&(h+=i.value[g].nodeValue);
e.objects.push({type:i.type,value:h,language:i.language})}else e.objects.push({type:i.type,value:i.value,language:i.language})}}return a};E.prototype.getValues=function(){for(var a=[],b=0;b<arguments.length;b++){var c=this.graph.curieParser.parse(arguments[b],!0);if(c=this.predicates[c])for(var e=0;e<c.objects.length;e++)a.push(c.objects[e].value)}return a};z.getPrefixMap=function(a){for(var b={};a.attributes;){for(var c=0;c<a.attributes.length;c++)if("http://www.w3.org/2000/xmlns/"==a.attributes[c].namespaceURI){var e=
a.attributes[c].localName;"xmlns"==a.attributes[c].localName&&(e="");e in b||(b[e]=a.attributes[c].nodeValue)}a=a.parentNode}return b};z.prototype.toString=function(a){var b=null;a&&a.shorten&&a.graph?(b=a.graph.shorten(this.predicate,a.prefixesUsed))||(b="<"+this.predicate+">"):b="<"+this.predicate+">";for(var b=b+" ",c=0;c<this.objects.length;c++)if(0<c&&(b+=", "),"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"==this.objects[c].type)"_:"==this.objects[c].value.substring(0,2)?b+=this.objects[c].value:
a&&a.shorten&&a.graph?(b=a.graph.shorten(this.objects[c].value,a.prefixesUsed))||(b="<"+this.objects[c].value+">"):b+="<"+this.objects[c].value+">";else if("http://www.w3.org/2001/XMLSchema#integer"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#decimal"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#double"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#boolean"==this.objects[c].type)b+=this.objects[c].value;else if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==
this.objects[c].type){for(var e=new XMLSerializer,f="",i=0;i<this.objects[c].value.length;i++)if(this.objects[c].value[i].nodeType==Node.ELEMENT_NODE){var d=z.getPrefixMap(this.objects[c].value[i]),h=[],g;for(g in d)h.push(g);h.sort();for(var j=this.objects[c].value[i].cloneNode(!0),m=0;m<h.length;m++)j.setAttributeNS("http://www.w3.org/2000/xmlns/",0==h[m].length?"xmlns":"xmlns:"+h[m],d[h[m]]);f+=e.serializeToString(j)}else this.objects[c].value[i].nodeType==Node.TEXT_NODE&&(f+=this.objects[c].value[i].nodeValue);
b+='"""'+f.replace(/"""/,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>'}else e=this.objects[c].value,b=0<=e.indexOf("\n")||0<=e.indexOf("\r")?b+('"""'+e.replace(/"""/,'\\"\\"\\"')+'"""'):b+('"'+e.replace(/"/,'\\"')+'"'),"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"!=this.objects[c].type?b+="^^<"+this.objects[c].type+">":this.objects[c].language&&(b+="@"+this.objects[c].language);return b};x.prototype=new j;x.prototype.constructor=j;x.prototype.getObjectSize=
function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};x.prototype.init=function(){var a=this;this.finishedHandlers.push(function(){for(var b in a.target.graph.subjects)0==a.getObjectSize(a.target.graph.subjects[b].predicates)&&delete a.target.graph.subjects[b]})};x.prototype.newSubjectOrigin=function(a,b){for(var c=this.newSubject(null,b),e=0;e<c.origins.length;e++)if(c.origins[e]===a)return;c.origins.push(a);a.data||Object.defineProperty(a,"data",{value:c,writable:!1,configurable:!0,
enumerable:!0})};x.prototype.newSubject=function(a,b){var c=this.target.graph.subjects[b];c||(c=new E(this.target.graph,b),this.target.graph.subjects[b]=c);return c};x.prototype.addTriple=function(a,b,c,e){var f=this.newSubject(a,b),b=f.predicates[c];b||(b=new z(c),f.predicates[c]=b);for(var i=0;i<b.objects.length;i++)if(b.objects[i].type==e.type&&b.objects[i].value==e.value){b.objects[i].origin!==a&&(Array.isArray(b.objects[i].origin)||(c=[],c.push(b.objects[i].origin),b.objects[i].origin=c),b.objects[i].origin.push(a));
return}b.objects.push(e);e.origin=a;c==j.typeURI&&f.types.push(e.value)};x.rdfaCopyPredicate="http://www.w3.org/ns/rdfa#copy";x.rdfaPatternType="http://www.w3.org/ns/rdfa#Pattern";x.prototype.copyProperties=function(){var a=[],b={},c;for(c in this.target.graph.subjects){var e=this.target.graph.subjects[c],f=e.predicates[x.rdfaCopyPredicate];if(f){a.push(c);for(var i=0;i<f.objects.length;i++)if(f.objects[i].type==j.objectURI){var d=f.objects[i].value,h=this.target.graph.subjects[d];if(h){var g=h.predicates[j.typeURI];
if(g){for(var l=!1,m=0;m<g.objects.length&&!l;m++)g.objects[m].value==x.rdfaPatternType&&g.objects[m].type==j.objectURI&&(l=!0);if(l){b[d]=!0;for(var q in h.predicates)if(d=h.predicates[q],q==j.typeURI){if(1!=d.objects.length)for(m=0;m<d.objects.length;m++)d.objects[m].value!=x.rdfaPatternType&&(g=e.predicates[q],g||(g=new z(q),e.predicates[q]=g),g.objects.push({type:d.objects[m].type,value:d.objects[m].value,language:d.objects[m].language,origin:d.objects[m].origin}),e.types.push(d.objects[m].value))}else{g=
e.predicates[q];g||(g=new z(q),e.predicates[q]=g);for(m=0;m<d.objects.length;m++)g.objects.push({type:d.objects[m].type,value:d.objects[m].value,language:d.objects[m].language,origin:d.objects[m].origin})}}}}}}}for(i=0;i<a.length;i++)e=this.target.graph.subjects[a[i]],delete e.predicates[x.rdfaCopyPredicate];for(c in b)delete this.target.graph.subjects[c]};H.prototype.getProperties=function(){var a=[],b;for(b in this._data_.properties)a.push(b);return a};H.prototype.getSubject=function(){return this._data_.subject};
H.prototype.get=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return(a=this._data_.properties[a])?a[0]:null};H.prototype.getAll=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return this._data_.properties[a]};p.prototype=new r;p.prototype.constructor=p;p.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";
p.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
p.NCNAME=RegExp("^"+j.nameStartChar+j.nameChar+"*$");p.toProjection=function(a,b,c){var e=new H(a,b.subject),f;for(f in b.predicates){var i=b.predicates[f],d=[];e._data_.properties[f]=d;for(var h=0;h<i.objects.length;h++)d.push(i.objects[h].value)}if(c)for(var g in c)f=c[g],f=a._data_.graph.curieParser.parse(f,!0),(d=e._data_.properties[f])&&(e[g]=1==d.length?d[0]:d);return e};p.prototype.getProperties=function(a){var b=[];if(a){if(a=this._data_.graph.curieParser.parse(a,!0),f=this._data_.graph.subjects[a])for(var c in f.predicates)b.push(c)}else{var a=
{},e;for(e in this._data_.graph.subjects){var f=this._data_.graph.subjects[e];if(f)for(c in f.predicates)a[c]||(a[c]=!0,b.push(c))}}return b};p.prototype.getSubjects=function(a,b){var c=[];a&&(a=this._data_.graph.curieParser.parse(a,!0));if(a&&b){var e=this._data_.graph.curieParser.parse(b,!0),f;for(f in this._data_.graph.subjects){var d=this._data_.graph.subjects[f];if(d=d.predicates[a])for(var k=0;k<d.objects.length;k++)if(d.objects[k].value==b||d.objects[k].value==e){c.push(f);break}}}else if(a)for(f in this._data_.graph.subjects)d=
this._data_.graph.subjects[f],(d=d.predicates[a])&&c.push(f);else if(b)for(f in e=this._data_.graph.curieParser.parse(b,!0),this._data_.graph.subjects){var d=this._data_.graph.subjects[f],h;for(h in d.predicates)if(d=f.predicates[h]){for(var g=null,k=0;!g&&k<d.objects.length;k++)if(d.objects[k].value==b||node.objects[k].value==e)g=d.objects[k];if(g){c.push(f);break}}}else for(f in this._data_.graph.subjects)c.push(f);return c};p.prototype.getValueOrigins=function(a,b){var c=[],e=function(a){if(a)for(var b=
0;b<a.objects.length;b++)if(Array.isArray(a.objects[b].origin))for(var e=0;e<a.objects[b].origin.length;e++)c.push({origin:a.objects[b].origin[e],value:a.objects[b].value});else c.push({origin:a.objects[b].origin,value:a.objects[b].value})};b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){var a=this._data_.graph.curieParser.parse(a,!0),f=this._data_.graph.subjects[a];if(f)if(b)e(f.predicates[b]);else for(var d in f.predicates)e(f.predicates[d])}else if(b)for(var k in this._data_.graph.subjects)f=
this._data_.graph.subjects[k],e(f.predicates[b]);else for(k in this._data_.graph.subjects)for(d in f=this._data_.graph.subjects[k],f.predicates)e(f.predicates[d]);return c};p.prototype.getValues=function(a,b){var c=[];b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){var a=this._data_.graph.curieParser.parse(a,!0),e=this._data_.graph.subjects[a];if(e)if(b){var f=e.predicates[b];if(f)for(var d=0;d<f.objects.length;d++)c.push(f.objects[d].value)}else for(var k in e.predicates){f=e.predicates[k];
for(d=0;d<f.objects.length;d++)c.push(f.objects[d].value)}}else if(b)for(var h in this._data_.graph.subjects){if(e=this._data_.graph.subjects[h],f=e.predicates[b])for(d=0;d<f.objects.length;d++)c.push(f.objects[d].value)}else for(h in this._data_.graph.subjects)for(k in e=this._data_.graph.subjects[h],e.predicates){f=e.predicates[k];for(d=0;d<f.objects.length;d++)c.push(f.objects[d].value)}return c};Object.defineProperty(p.prototype,"prefixes",{enumerable:!0,get:function(){return Object.keys(this._data_.graph.prefixes)}});
p.prototype.setMapping=function(a,b){this._data_.graph.prefixes[a]=b};p.prototype.getMapping=function(a){return this._data_.graph.prefixes[a]};p.prototype.expand=function(a){return this._data_.graph.expand(a)};p.prototype.shorten=function(a){return this._data_.graph.shorten(a)};p.prototype.getSubject=function(a){if(!a)return null;a=this._data_.graph.curieParser.parse(a,!0);return(a=this._data_.graph.subjects[a])?a:null};p.prototype.getProjection=function(a,b){if(!a)return null;var a=this._data_.graph.curieParser.parse(a,
!0),c=this._data_.graph.subjects[a];return!c?null:p.toProjection(this,c,b)};p.prototype.getProjections=function(a,b,c){a&&(a=this._data_.graph.curieParser.parse(a,!0));var e=[];"undefined"==typeof b&&"undefined"==typeof c&&(c=a);if(a&&b){var f=this._data_.graph.curieParser.parse(b,!0),d;for(d in this._data_.graph.subjects){var k=this._data_.graph.subjects[d],h=k.predicates[a];if(h)for(var g=0;g<h.objects.length;g++)if(h.objects[g].value==b||h.objects[g].value==f){e.push(p.toProjection(this,k,c));
break}}}else if(a)for(d in this._data_.graph.subjects)k=this._data_.graph.subjects[d],k.predicates[a]&&e.push(p.toProjection(this,k,c));else for(d in this._data_.graph.subjects)k=this._data_.graph.subjects[d],e.push(p.toProjection(this,k,c));return e};p.prototype.merge=function(a,b){var c=b&&b.mergeBlankNodes?!0:!1,e=0;if(!c)for(var f in this._data_.graph.subjects){var d=/_:([0-9]+)/.exec(f);d&&(d=parseInt(d[1]),d>e&&(e=d))}if(a){var k={},c=c?function(a){return a}:function(a){var b=k[a];!b&&/_:([0-9]+)/.test(a)&&
(e++,b="_:"+e,k[a]=b);return b?b:a};for(f in a){var h=c(f),d=a[f];f=h?h:f;if(h=this._data_.graph.subjects[f])for(var g in d.predicates){var l=d.predicates[g],m=h.predicates[g];if(m)for(var q=0;q<l.objects.length;q++){for(var n=l.objects[q],p=[],r=0;r<m.objects.length;r++)n.type==j.XMLLiteralURI&&(m.objects[r].type!=n.type||m.objects[r].value!==n.value)?p.push(n):(m.objects[r].type!=n.type||m.objects[r].value==n.value)&&p.push(n);for(r=0;r<p.length;r++)p[r].type==j.objectURI&&(p[r].value=c(p[r].value)),
m.objects.push(p[r])}else{h.predicates[g]=l;for(q=0;q<l.objects.length;q++)l.objects[q].type==j.objectURI&&(l.objects[q].value=c(l.objects[q].value))}}else for(g in this._data_.graph.subjects[f]=d,d.subject=f,d.predicates){l=d.predicates[g];for(q=0;q<l.objects.length;q++)l.objects[q].type==j.objectURI&&(l.objects[q].value=c(l.objects[q].value))}}}if(b&&b.prefixes)for(var w in b.prefixes)this._data_.graph.prefixes[w]||(this._data_.graph.prefixes[w]=b.prefixes[w])};Element.prototype.getElementsByType=
function(){var a=arguments,b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var c=0;c<a.length;c++)if(0<=b.data.types.indexOf(a[c]))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}},!1),c=[];for(c.item=function(a){return this[a]};b.nextNode();)c.push(b.currentNode);return c};Element.prototype.getFirstElementByType=function(){var a=arguments,b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,
{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var e=0;e<a.length;e++)if(0<=b.data.types.indexOf(a[e]))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}},!1);return b.nextNode()?b.currentNode:null};p.attach=function(a,b){Object.defineProperty(a,"data",{value:new p(b&&b.baseURI?b.baseURI:a.nodeType==Node.DOCUMENT_NODE?a.documentElement.baseURI:a.graph.baseURI),writable:!1,configurable:!1,enumerable:!0});a.getElementsByType=function(a){return this.getElementsByProperty("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
a)};a.getElementsBySubject=function(a){var b=[];b.item=function(a){return this[a]};a=this.data._data_.graph.curieParser.parse(a,!0);if(a=this.data._data_.graph.subjects[a])for(var f=0;f<a.origins.length;f++)b.push(a.origins[f]);return b};a.getElementsByProperty=function(a,b){var f=[];f.item=function(a){return this[a]};b&&(b=this.data._data_.graph.curieParser.parse(b,!1));var d="undefined"==typeof b,a=this.data._data_.graph.curieParser.parse(a,!0),k;for(k in this.data._data_.graph.subjects){var h=
this.data._data_.graph.subjects[k].predicates[a];if(h)for(var g=0;g<h.objects.length;g++)if(d||h.objects[g].value==b)Array.isArray(h.objects[g].origin)?f.push.apply(f,h.objects[g].origin):f.push(h.objects[g].origin)}return f};a.getElementSubject=function(a){for(var b in this.data._data_.graph.subjects)if(0<=this.data._data_.graph.subjects[b].origins.indexOf(a))return b;return null}};d.prototype=new r;d.prototype.constructor=d;d.commentRE=/^#.*/;d.wsRE=/^\s+/;d.iriRE=/^\<((?:(?:[^\x00-\x20<>"{}|^`\\]|\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]|\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])*))\>/;
d.singleQuoteLiteralRE=/^'((?:[^'\n\r\\]*|\\'|\\)*)'/;d.doubleQuoteLiteralRE=/^\"((?:[^"\n\r\\]*|\\"|\\)*)\"/;d.longDoubleQuoteLiteralRE=/^\"\"\"((?:[^"\\]*|\\"|\\|\"(?!\")|\"\"(?!\"))*)\"\"\"/;d.longSingleQuoteLiteralRE=/^'''((?:[^'\\]*|\\'|\\|'(?!')|''(?!'))*)'''/;d.typeRE=/^\^\^/;d.dotRE=/^\./;d.openSquareBracketRE=/^\[/;d.closeSquareBracketRE=/^\]/;d.prefixRE=/^((?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\.\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040]))?)?):/;
d.blankNodeRE=/^(_:)/;d.localNameRE=/^((?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_:]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=\/?#@%])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\.:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%]))?)/;
d.langRE=/^@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)/;d.prefixIDRE=/^@prefix/;d.baseRE=/^@base/;d.sparqlPrefixRE=/^[Pp][Rr][Ee][Ff][Ii][Xx]/;d.sparqlBaseRE=/^[Bb][Aa][Ss][Ee]/;d.semicolonRE=/^;/;d.commaRE=/^,/;d.aRE=/^a/;d.openParenRE=/^\(/;d.closeParenRE=/^\)/;d.integerRE=/^([+-]?[0-9]+)/;d.decimalRE=/^([+-]?[0-9]*\.[0-9]+)/;d.doubleRE=/^([+-]?(?:[0-9]+\.[0-9]*[eE][+-]?[0-9]+|\.[0-9]+[eE][+-]?[0-9]+|[0-9]+[eE][+-]?[0-9]+))/;d.booleanRE=/^(true|false)/;d.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";
d.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";d.plainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";d.nilURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";d.firstURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#first";d.restURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest";d.xsdStringURI="http://www.w3.org/2001/XMLSchema#string";d.xsdIntegerURI="http://www.w3.org/2001/XMLSchema#integer";d.xsdDecimalURI="http://www.w3.org/2001/XMLSchema#decimal";d.xsdDoubleURI=
"http://www.w3.org/2001/XMLSchema#double";d.xsdBooleanURI="http://www.w3.org/2001/XMLSchema#boolean";d.prototype.reset=function(){this.context=new M;this.errorCount=this.blankNodeCounter=0;this.lineNumber=1};d.dumpGraph=function(a){for(var b in a)console.log(a[b].toString())};d.prototype.newBlankNode=function(){this.blankNodeCounter++;return"_:"+this.blankNodeCounter};d.prototype._match=function(a,b){var c=a.exec(b);return c?{text:c[0],remaining:b.substring(c[0].length),values:1<c.length?c.splice(1):
null}:null};d.prototype._trim=function(a){var b=null;do{if(b=d.wsRE.exec(a))this.lineNumber+=b[0].split(/\n/).length-1,a=a.substring(b[0].length);(b=d.commentRE.exec(a))&&(a=a.substring(b[0].length))}while(b);return a};d.prototype.reportError=function(a){this.onError(this.lineNumber,a)};d.prototype.parse=function(a,b){b&&(this.context.baseURI=this.parseURI(b));for(;0<a.length;)a=this._trim(a),0<a.length&&(a=this.parseStatement(a))};d.prototype.parseStatement=function(a){var b=this._match(d.prefixIDRE,
a);if(b){var c=this._trim(b.remaining),b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after @prefix: "+a.substring(20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @prefix: "+c.substring(20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):b.iri;try{this.parseURI(this.context.prefixes[a])}catch(e){this.reportError(e.toString()),
this.errorCount++}c=this._trim(b.remaining);if(b=this._match(d.dotRE,c))return b.remaining;this.reportError("Missing end . for @prefix statement.  Found: "+c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(d.baseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @base: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):this.parseURI(b.iri)}catch(f){this.reportError(f+
"; IRI: "+b.iri),this.errorCount++}c=this._trim(b.remaining);if(b=this._match(d.dotRE,c))return b.remaining;this.reportError("Missing end . for @base statement.  Found: "+c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(d.sparqlPrefixRE,a)){c=this._trim(b.remaining);b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after PREFIX: "+a.substring(0,20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after PREFIX: "+
c.substring(0,20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):b.iri;try{this.parseURI(this.context.prefixes[a])}catch(i){this.reportError(i.toString()),this.errorCount++}return b.remaining}if(b=this._match(d.sparqlBaseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after BASE: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):
this.parseURI(b.iri)}catch(k){this.reportError(k+"; IRI: "+b.iri),this.errorCount++}return b.remaining}a=this.parseTriples(a);a=this._trim(a);if(b=this._match(d.dotRE,a))return b.remaining;this.reportError("Missing end . triples.  Found: "+a.substring(0,20)+"...");this.errorCount++;return a};d.prototype.parseTriples=function(a){var b=this.parseIRI(a);if(b||(b=this.parseBlankNode(a)))return this.parsePredicateObjectList(b.iri,this._trim(b.remaining));if(b=this._match(d.openParenRE,a)){var a=null,c=
b.remaining,e=null;do{c=this._trim(c);if(b=this._match(d.closeParenRE,c)){c=b.remaining;e?this.addTriple(e,d.restURI,{type:d.objectURI,value:d.nilURI}):a=this.newBlankNode();break}b=this.newBlankNode();e?this.addTriple(e,d.restURI,{type:d.objectURI,value:b}):a=b;e=b;c=this.parseObject(e,d.firstURI,c)}while(0<c.length);return this.parsePredicateObjectList(a,this._trim(c))}return(b=this._match(d.openSquareBracketRE,a))?(a=this.newBlankNode(),c=this._trim(b.remaining),(b=this._match(d.closeSquareBracketRE,
c))?c=b.remaining:(c=this.parsePredicateObjectList(a,c),(b=this._match(d.closeSquareBracketRE,this._trim(c)))?c=b.remaining:this.reportError("Missing end square bracket ']'.")),this.parsePredicateObjectList(a,this._trim(c),!0)):!b?(this.reportError("Terminating: Cannot parse at "+a.substring(0,20)+" ..."),this.errorCount++,""):this.parsePredicateObjectList(b.iri,this._trim(b.remaining))};d.prototype.parsePredicateObjectList=function(a,b,c){var e=!0,f=null;do{var i=this.parseIRI(b);if(!i&&(i=this._match(d.aRE,
b)))i.iri=d.typeURI;if(!i){if(c)return b;this.reportError("Terminating: Cannot parse predicate IRI.");this.errorCount++;return""}f=this.parseObjectList(a,i.iri,this._trim(i.remaining));if(i=this._match(d.semicolonRE,this._trim(f))){do b=this._trim(i.remaining),i=this._match(d.semicolonRE,b);while(i);c=!0}else e=!1}while(e);return f};d.prototype.parseObjectList=function(a,b,c){var e=!0,f=null;do{var f=this.parseObject(a,b,c),i=this._match(d.commaRE,this._trim(f));i?c=this._trim(i.remaining):e=!1}while(e);
return f};d.prototype.parseObject=function(a,b,c){var e=this.parseIRI(c);if(e||(e=this.parseBlankNode(c)))return this.addTriple(a,b,{type:d.objectURI,value:e.iri}),e.remaining;if(e=this._match(d.openParenRE,c)){var f=a,i=b,k=e.remaining;do{k=this._trim(k);if(e=this._match(d.closeParenRE,k))return this.addTriple(f,f==a?b:d.restURI,{type:d.objectURI,value:d.nilURI}),e.remaining;e=this.newBlankNode();f==a?this.addTriple(a,b,{type:d.objectURI,value:e}):this.addTriple(f,d.restURI,{type:d.objectURI,value:e});
f=e;i=d.firstURI;k=this.parseObject(f,i,k)}while(0<k.length)}if(e=this._match(d.openSquareBracketRE,c)){c=this.newBlankNode();this.addTriple(a,b,{type:d.objectURI,value:c});k=this.parsePredicateObjectList(c,this._trim(e.remaining),!0);k=this._trim(k);if(e=this._match(d.closeSquareBracketRE,k))return e.remaining;this.reportError("Missing close square bracket ']' for blank node "+c+" predicate object list");this.errorCount++;return k}if(e=this.parseLiteral(c))return this.addTriple(a,b,{type:e.type?
e.type:d.plainLiteralURI,value:e.literal,language:e.language}),e.remaining;this.reportError("Terminating: Cannot parse literal at "+c.substring(0,20));this.errorCount++;return""};d.prototype.parsePrefixName=function(a){if(a=this._match(d.prefixRE,a))a.prefix=a.values[0];return a};d.prototype.parseIRIReference=function(a){if(a=this._match(d.iriRE,a))a.iri=d.expandURI(a.values[0]);return a};d.prototype.parseIRI=function(a){var b=this._match(d.iriRE,a);if(b){a=d.expandURI(b.values[0]);b.iri=this.context.baseURI?
this.context.baseURI.resolve(a):a;try{this.parseURI(b.iri)}catch(c){this.reportError(c.toString()),this.errorCount++}return b}if(b=this._match(d.prefixRE,a)){var e=b.values[0],a=this.context.prefixes[e];if(!a)return this.reportError("No prefix mapping for "+e),this.errorCount++,null;e=b.remaining;if(b=this._match(d.localNameRE,e)){b.iri=a+d.expandName(b.values[0]);try{this.parseURI(b.iri)}catch(f){this.reportError(f.toString()),this.errorCount++}return b}return{iri:a,remaining:e}}return null};d.prototype.parseBlankNode=
function(a){if(a=this._match(d.blankNodeRE,a))if(a=this._match(d.localNameRE,a.remaining))return a.iri="_:"+d.expandName(a.values[0]),a;return null};d.prototype.parseLiteral=function(a){var b=this._match(d.longDoubleQuoteLiteralRE,a);b||(b=this._match(d.longSingleQuoteLiteralRE,a));b||(b=this._match(d.singleQuoteLiteralRE,a));b||(b=this._match(d.doubleQuoteLiteralRE,a));if(b){a=null;try{a=d.expandLiteral(b.values[0])}catch(c){this.reportError(c.toString()),this.errorCount++}var e=b.remaining;if(b=
this._match(d.langRE,e))return b.literal=a,b.language=b.values[0],b;if(b=this._match(d.typeRE,e)){e=b.remaining;if(b=this.parseIRI(e))return b.literal=a,b.type=b.iri,b;this.reportError("Missing type URI after ^^");this.errorCount++}return{literal:a,remaining:e}}return(b=this._match(d.doubleRE,a))?(b.literal=b.values[0],b.type=d.xsdDoubleURI,b):(b=this._match(d.decimalRE,a))?(b.literal=b.values[0],b.type=d.xsdDecimalURI,b):(b=this._match(d.integerRE,a))?(b.literal=b.values[0],b.type=d.xsdIntegerURI,
b):(b=this._match(d.booleanRE,a))?(b.literal=b.values[0],b.type=d.xsdBooleanURI,b):null};d.prototype.newSubject=function(a){var b=this.context.subjects[a];b||(b=new E(this.context,a),this.context.subjects[a]=b);return b};d.expandHex=function(a){for(var b=a.split(/[0-9A-Fa-f]+/),c=0;c<b.length;c++)if(0<b[c].length)throw"Bad hex in escape: "+a;b=parseInt(a,16);if(isNaN(b))throw"Bad hex in escape: "+a;if(65536>b)return String.fromCharCode(b);a=b-65536;b=a&1023;return String.fromCharCode((a>>10)+55296)+
String.fromCharCode(b+56320)};d.escapedSequenceRE=/(\\t|\\b|\\n|\\r|\\f|\\"|\\'|\\\\|(?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;d.expandLiteral=function(a){for(var a=a.split(d.escapedSequenceRE),b="",c=0;c<a.length;c++)if(0!=a[c].length)if("\\t"==a[c])b+="\t";else if("\\b"==a[c])b+="\b";else if("\\n"==a[c])b+="\n";else if("\\r"==a[c])b+="\r";else if("\\f"==a[c])b+="\f";else if('\\"'==a[c])b+=
'"';else if("\\'"==a[c])b+="'";else if("\\\\"==a[c])b+="\\";else if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else{var e=a[c].substring(0,2);if(2==e.length&&"\\U"==e)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==e.length&&"\\u"==e)throw"Bad hex in \\u escape "+a[c].substring(0,6);e=a[c].indexOf("\\");if(0<=e)throw"Bad escape "+a[c].substring(e,
e+2);b+=a[c]}return b};d.escapedURIRE=/((?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;d.expandURI=function(a){for(var a=a.split(d.escapedURIRE),b="",c=0;c<a.length;c++)if(0!=a[c].length)if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else{var e=a[c].substring(0,
2);if(2==e.length&&"\\U"==e)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==e.length&&"\\u"==e)throw"Bad hex in \\u escape "+a[c].substring(0,6);e=a[c].indexOf("\\");if(0<=e)throw"Bad escape "+a[c].substring(e,e+2);b+=a[c]}return b};d.escapedNameCharRE=/(\\[_~\.\-!$&'()*+,;=/?#@%])/;d.expandName=function(a){for(var a=a.split(d.escapedNameCharRE),b="",c=0;c<a.length;c++)0!=a[c].length&&(b="\\"==a[c].charAt(0)?b+a[c].charAt(1):b+a[c]);return b};d.prototype.addTriple=function(a,b,c){var a=this.newSubject(a),
e=a.predicates[b];e||(e=new z(b),a.predicates[b]=e);e.objects.push(c);b==d.typeURI&&a.types.push(c.value)};l.prototype=new r;l.prototype.constructor=l;l.absoluteURIRE=/[\w\_\-]+:\S+/;l.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};l.prototype.createBaseURI=function(a){var b=a.indexOf("#");0<=b&&(a=a.substring(0,b));return this.parseURI(a)};l.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};l.tokenize=function(a){return l.trim(a).split(/\s+/)};
l.prototype.getVocabulary=function(a){for(var b=0;b<this.vocabularies.length;b++)if(this.vocabularies[b].isMember(a))return this.vocabularies[b];var b=function(a){return{namespaceURI:a,getProperty:function(a){return this.namespaceURI+a}}},c=a.indexOf("#");if(0<=c)return b(a.substring(0,c+1));c=a.lastIndexOf("/");return 0<=c?b(a.substring(0,c+1)):b(a)};l.prototype.getProperty=function(a,b){return l.absoluteURIRE.exec(a)?a:b?b.getProperty(a):null};l.valueMappings={meta:function(a){return a.getAttribute("content")},
audio:function(a,b){return b.resolve(a.getAttribute("src"))},a:function(a,b){return b.resolve(a.getAttribute("href"))},object:function(a,b){return b.resolve(a.getAttribute("data"))},time:function(a){var b=a.getAttribute("datetime");return b?b:a.textContent}};l.valueMappings.embed=l.valueMappings.audio;l.valueMappings.iframe=l.valueMappings.audio;l.valueMappings.img=l.valueMappings.audio;l.valueMappings.source=l.valueMappings.audio;l.valueMappings.track=l.valueMappings.audio;l.valueMappings.video=
l.valueMappings.audio;l.valueMappings.area=l.valueMappings.a;l.valueMappings.link=l.valueMappings.a;l.prototype.getValue=function(a,b){var c=l.valueMappings[a.localName];return c?c(a,b):a.textContent};l.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";l.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";l.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";l.prototype.process=function(a){a.nodeType==Node.DOCUMENT_NODE&&(a=a.documentElement);var b=[];for(b.push({current:a,
context:this.push(null,null)});0<b.length;){var c=b.shift(),a=c.current,c=c.context,e=this.createBaseURI(a.baseURI),f=null,d=c.vocabulary,k=a.hasAttribute("itemscope");if(k){var h=a.getAttribute("itemtype"),g=a.getAttribute("itemid");h&&(d=this.getVocabulary(h),f=g?g:this.newBlankNode(),this.addTriple(a,f,l.typeURI,{type:l.objectURI,value:h}))}if(h=a.getAttribute("itemprop"))if(h=l.tokenize(h),k)c.parent.subject&&f&&this.addTriple(a,c.subject,j,{type:l.objectURI,value:f});else if(d&&(f||(f=c.subject),
f)){e=this.getValue(a,e);for(k=0;k<h.length;k++){var j=0<h[k].length?this.getProperty(h[k],d):null;j&&this.addTriple(a,f,j,{type:l.PlainLiteralURI,value:e})}}for(a=a.lastChild;a;a=a.previousSibling)a.nodeType==Node.ELEMENT_NODE&&b.unshift({current:a,context:this.push(c,f,d)})}};l.prototype.push=function(a,b,c){return{parent:a,subject:b?b:a?a.subject:null,vocabulary:c?c:a?a.vocabulary:null}};l.prototype.addTriple=function(){};N.prototype=new l;N.prototype.constructor=l;N.prototype.addTriple=function(a,
b,c,e){var d=this.graph.subjects[b];d||(d=new E(this.graph,b),this.graph.subjects[b]=d);b=d.predicates[c];b||(b=new z(c),d.predicates[c]=b);for(var i=0;i<b.objects.length;i++)if(b.objects[i].type==e.type&&b.objects[i].value==e.value){b.objects[i].origin!==a&&(Array.isArray(b.objects[i].origin)||(c=[],c.push(b.objects[i].origin),b.objects[i].origin=c),b.objects[i].origin.push(a));return}b.objects.push(e);e.origin=a;c==l.typeURI&&d.types.push(e.value)};var D={attach:function(a,b){var c=a.implementation.hasFeature;
a.implementation.hasFeature=function(a,b){return"RDFaAPI"==a&&"1.1"==b?!0:c.apply(this,arguments)};var e=a.data?!0:!1;if(a.data)a.data._data_&&a.data._data_.graph.clear();else{p.attach(a,b);var d=function(a){a.id||(a.id="R"+Date.now());return new CustomEvent("green-turtle-response",{detail:a})};window.addEventListener("green-turtle-request",function(b){if("status"==b.detail.type)b={type:"status",version:GreenTurtle.version,loaded:e,count:a.data.graph.tripleCount,id:b.detail.id},window.dispatchEvent(d(b));
else if("get-subjects"==b.detail.type){var c=a.data.getSubjects(),b={type:"subjects",subjects:c,id:b.detail.id};window.dispatchEvent(d(b))}else if("get-subject"==b.detail.type){var g=null,i=b.detail.subject;if(a.data.getSubject)g=(c=a.data.getSubject(i))?c.toObject():null;else for(var g={subject:i,predicates:{}},j=a.data.getProjection(i),l=j.getProperties(),n=0;n<l.length;n++){var p=[];g.predicates[l[n]]={predicate:predicate,objects:p};for(var r=j.getAll(l[n]),w=0;w<r.length;w++)c[r[w]]?p.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",
value:r[w]}):p.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",value:r[w]})}b={type:"subject",subject:i,triples:g,id:b.detail.id};window.dispatchEvent(d(b))}else console.log("Unrecognized message: "+JSON.stringify(b.detail))},!1)}var i=function(){var c=new x(a.data._data_);c.finishedHandlers.push(function(){for(var c in D.processors)D.processors[c].process(a,b)});c.finishedHandlers.push(function(a){if(a.ownerDocument){var b=a.ownerDocument.createEvent("HTMLEvents");b.initEvent("rdfa.loaded",
!0,!0);a.ownerDocument.dispatchEvent(b)}});c.process(a.documentElement,b);e=!0};"loading"==a.readyState?window.addEventListener("load",function(){i()},!1):i()},parse:function(a,b,c){var d=this.processors[b];if(!d)throw"Unsupported media type "+b;d=d.createParser();c&&c.errorHandler&&(d.onError=c.errorHandler);c=c?c.baseURI:null;d.parse(a,c);if(0<d.errorCount)throw c?"Errors during parsing "+c+" of type "+b:"Errors during parsing of type "+b;return d.context},createDocumentData:function(a){return new p(a?
a:window?window.location.href:"about:blank")}};Object.defineProperty(D,"processors",{value:{},writable:!1,configurable:!1,enumerable:!0});D.processors["text/turtle"]={createParser:function(){return new d},process:function(a,b){if(this.enabled){var c=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(c.data){for(var d=!0,f=c.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","script"),i=0;i<f.length;i++)if("text/turtle"==f[i].getAttribute("type")){var j=this.createParser();b&&b.errorHandler&&(j.onError=
b.errorHandler);j.parse(f[i].textContent,b?b.baseURI:null);0<j.errorCount?d=!1:c.data.merge(j.context.subjects,{prefixes:j.context.prefixes})}return d}}},enabled:!0};D.processors.microdata={process:function(a){if(this.enabled){var b=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(!b.data)return!1;(new N(b.data.graph)).process(a);return!0}},enabled:!1};Object.defineProperty(O,"implementation",{value:D,writable:!1,configurable:!1,enumerable:!0});O.attach=function(a,b){D.attach(a,b)};return O}();
GreenTurtle.attach(document);
